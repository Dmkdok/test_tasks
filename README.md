# Менеджер задач

Веб-приложение для управления задачами с использованием FastAPI и SQLite.

## Описание

Менеджер задач предоставляет REST API для выполнения CRUD операций с задачами:
- **Create** - создание новых задач
- **Read** - получение задач (по ID и списком)
- **Update** - обновление существующих задач
- **Delete** - удаление задач

### Модель задачи

Каждая задача содержит:
- `id` - уникальный идентификатор (UUID)
- `title` - название задачи (обязательно)
- `description` - описание задачи (опционально)
- `status` - статус задачи (создано, в работе, завершено)

## Технические требования

- Python 3.8+
- FastAPI
- SQLAlchemy
- SQLite
- Pytest (для тестирования)

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd testovoe_1
```

### 2. Создание виртуального окружения

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate     # Windows
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Запуск приложения

```bash
uvicorn app.main:app --reload
```

Приложение будет доступно по адресу: http://localhost:8000

## API Документация

После запуска приложения доступна автоматически сгенерированная документация:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## Endpoints API

### Создание задачи
```http
POST /tasks/
Content-Type: application/json

{
  "title": "Название задачи",
  "description": "Описание задачи",
  "status": "создано"
}
```

### Получение задачи по ID
```http
GET /tasks/{task_id}
```

### Получение списка задач
```http
GET /tasks/?skip=0&limit=100&status=создано
```

Параметры:
- `skip` - количество записей для пропуска (по умолчанию 0)
- `limit` - максимальное количество записей (по умолчанию 100, максимум 1000)
- `status` - фильтр по статусу (опционально)

### Обновление задачи
```http
PUT /tasks/{task_id}
Content-Type: application/json

{
  "title": "Новое название",
  "status": "в работе"
}
```

### Удаление задачи
```http
DELETE /tasks/{task_id}
```

## Статусы задач

- `создано` - задача создана, но не начата
- `в работе` - задача выполняется
- `завершено` - задача завершена

## Тестирование

### Запуск тестов

```bash
pytest
```

### Запуск тестов с подробным выводом

```bash
pytest -v
```

### Запуск тестов с покрытием

```bash
pytest --cov=app
```

### Структура тестов

Тесты разделены на несколько классов:
- `TestTaskCRUD` - тесты CRUD операций
- `TestTaskAPI` - тесты API endpoints
- `TestTaskValidation` - тесты валидации данных

## Структура проекта

```
testovoe_1/
├── app/
│   ├── __init__.py
│   ├── main.py              # Главное приложение
│   ├── database.py          # Конфигурация БД
│   ├── models/
│   │   ├── __init__.py
│   │   └── task.py          # Модель задачи
│   ├── schemas/
│   │   ├── __init__.py
│   │   └── task.py          # Pydantic схемы
│   ├── crud/
│   │   ├── __init__.py
│   │   └── task.py          # CRUD операции
│   └── api/
│       ├── __init__.py
│       └── tasks.py         # API endpoints
├── tests/
│   ├── __init__.py
│   ├── conftest.py          # Конфигурация pytest
│   └── test_tasks.py        # Тесты
├── requirements.txt         # Зависимости
├── pyproject.toml          # Конфигурация проекта
└── README.md               # Документация
```

## Особенности реализации

### Качество кода
- Соблюдение стандартов PEP8
- Типизация с использованием type hints
- Документирование всех функций и классов
- Разделение ответственности между слоями

### Безопасность
- Валидация входных данных с помощью Pydantic
- Обработка ошибок с соответствующими HTTP статусами
- Защита от SQL-инъекций через ORM

### Производительность
- Пагинация для больших списков
- Индексы в базе данных
- Эффективные запросы к БД

### Тестирование
- Полное покрытие тестами всех CRUD операций
- Тестирование API endpoints
- Тестирование валидации данных
- Изолированные тесты с отдельной тестовой БД

## Примеры использования

### Создание задачи через curl

```bash
curl -X POST "http://localhost:8000/tasks/" \
     -H "Content-Type: application/json" \
     -d '{
       "title": "Изучить FastAPI",
       "description": "Изучить документацию и примеры",
       "status": "создано"
     }'
```

### Получение списка задач

```bash
curl "http://localhost:8000/tasks/"
```

### Обновление статуса задачи

```bash
curl -X PUT "http://localhost:8000/tasks/{task_id}" \
     -H "Content-Type: application/json" \
     -d '{"status": "в работе"}'
```

## Лицензия

MIT License
